<!DOCTYPE html>

<html lang="en" style="overflow: hidden">
<!-- Head -->
<head>
    <meta charset="utf-8"/>
    <title>NC Cloud | 协同云</title>

    <meta name="description" content="Dashboard"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    {% for (var chunk in o.htmlWebpackPlugin.files.chunks['index'].css) { %}
        <link href="{%=o.htmlWebpackPlugin.files.chunks['index'].css[chunk]%}" rel="stylesheet">
    {% } %}

     <script>
        window.$ctx = '/iuap-example';
    </script>
</head>
<!-- /Head -->
<!-- Body -->
<body>
  <header style="display: block;    top: 0;
    width: 100%;">
	  <div class="menu-folder fl">
			<span></span>
	  </div>
    <div class="page-deader clearfix">
      <div class="user-action"><span class="avatar"></span><span class="cur-uname"></span><span class="tri-down"></span></div>
      <div class="func-pannal">
        <div class="add-new relative pointer">
        	<ul class="add-menu hidden">
        		<li>创建新项目</li>
        	<!-- 	<li>创建新日程</li>
        		<li>提交审批</li>       -->  	
        	</ul>
        </div>
        <div id="">
          <input class="search-area"></input>
        </div>
        <div class="get-help"></div>
      </div>
      <!-- <img src="./static/images/logo.png"/> -->
      <span class="logo"></span>
    </div>
  
      
    </header>

    <div class="main">
      
      <div class="page-aside" id="ripple">
	      <ul >
	      <li><a href="#home">首页</a><span class="u-ripple"></li>
	      <li class="chanel-msg"><a href="#message">消息<span class="outer hidden"><span>99+</span></span></a><span class="u-ripple"></span></li>
	      <li class="iform-test"><a href="#">审批</a><span class="u-ripple"></li>
	      <li><a href="#project">项目</a><span class="u-ripple"></li>
	      <li><a href="#">日程</a><span class="u-ripple"></li>
	      <li><a href="#">通讯录</a><span class="u-ripple"></li>
	      <li><a href="#cloudisk">云盘</a><span class="u-ripple"></li>
	      <li><a href="#">应用</a><span class="u-ripple"></li>
	      <li class="set-site"><a href="#inbox">设置</a><span class="u-ripple"></li>
	       <!-- <li id="cuser"><a style="font-size: 10px">切换用户</a><span class="u-ripple"></li> -->
	      </ul>
      </div>

       <div class="" id="content" style="">
           
            
           
        </div>

        <div class="" id="im-content" style="display:none;">
	     
		</div>
	    </div><!-- end main-->
		<div id="loading_bg"></div>
		  
		<div id="loading" class=" loading-animation">
		<span></span>
		<span></span>
		<span></span>
		</div>

		<script src="{%=o.htmlWebpackPlugin.files.chunks['vendor'].entry %}"></script>
		<script src="{%=o.htmlWebpackPlugin.files.chunks['index'].entry %}"></script>

		<!--  消息模块依赖 -->
		<script src="message/lib/jquery-1.11.2.min.js" type="text/javascript"></script>
		<script src="message/lib/YYIMSDK.min.js" type="text/javascript"></script>
	    <script src="message/cache/YYIMCache.js" type="text/javascript" charset="utf-8"></script>
		
		<script src="message/angular/lib/mixture.js" type="text/javascript"></script>
		<script src="message/angular/lib/angular.js" type="text/javascript"></script>
		<script src="message/angular/lib/angular-ui-router.min.js" type="text/javascript"></script>
		<script src="message/angular/lib/expression/ExpressionData.js"></script>
		<script src="message/angular/lib/purl.js" type="text/javascript"></script>
		<script src="message/angular/lib/angular-sanitize.js" type="text/javascript"></script>
		<script src="message/angular/lib/angular-cookies.js" type="text/javascript"></script>
		<script src="message/angular/lib/ngDialog.min.js" type="text/javascript"></script>
		<script src="message/angular/lib/getFirstLetter.js"></script>
		<script src="message/angular/lib/infinite-scroll.js"></script>
		<script src="message/angular/lib/taffy-min.js" type="text/javascript"></script>
		
		
		<script src="message/angular/directive/openUrl.js" type="text/javascript"></script>
		<script src="message/angular/directive/imgError.js" type="text/javascript" charset="utf-8"></script>
		
		
		<script src="message/angular/service/IMChatUrl.Service.js" type="text/javascript"></script>
		<script src="message/angular/service/IMChat.NWKeyService.js" type="text/javascript"></script>
		<script src="message/angular/service/IMChat.AudioPlay.js" type="text/javascript"></script>
		<script src="message/angular/service/IMChat.FileCaptureService.js" type="text/javascript"></script>
		<script src="message/angular/service/IMChat.FileConvertService.js" type="text/javascript"></script>
		<script src="message/angular/service/IMChat.UpdateService.js" type="text/javascript"></script>
		<script src="message/angular/service/IMChat.ShortCutService.js"></script>
		

		<script src="message/angular/controller/IMChat.Controller.js" type="text/javascript"></script>
		<script src="message/angular/controller/IMChat.GroupController.js" type="text/javascript"></script>
		<script src="message/angular/controller/IMChat.groupSetupController.js" type="text/javascript"></script>
		
		
		<script src="message/angular/config/config.js" type="text/javascript"></script>
		<script src="message/angular/app/app.js" type="text/javascript"></script>
		<script src="message/angular/plugin/IMChat.ThirdPlug.js" type="text/javascript"></script>
		<script src="message/angular/filter/filter.js" type="text/javascript"></script>
		
		<script src="message/angular/lib/ngStorage.min.js" type="text/javascript"></script>
		<script src="message/angular/lib/angular-animate.min.js" type="text/javascript"></script>
		<script src="message/angular/lib/toaster.min.js" type="text/javascript"></script>
		<script src="message/angular/lib/Underscore.min.js" type="text/javascript"></script>
		<script src="message/angular/lib/angularui-select/select.min.js" type="text/javascript"></script>
		<script src="message/angular/lib/angular-image-cropper/ImageView.js"></script>
		<script src="message/angular/lib/angular-image-cropper/module.js"></script>
		<script src="message/angular/lib/angular-image-cropper/directives/directive.js"></script>
		

		<link href="message/angular/lib/angularui-select/select.min.css" rel="stylesheet" type="text/css" />
		<link href="message/angular/style/css/ngDialog.min.css" rel="stylesheet" type="text/css" />
		<link href="message/angular/style/css/Bootstrap.css" rel="stylesheet" type="text/css" />
		<link href="message/angular/style/css/homeindex.css" rel="stylesheet" type="text/css" />
		<link href="message/angular/style/css/toaster.min.css" rel="stylesheet" type="text/css" />
		<link href="message/angular/style/css/angular-image-cropper.min.css" rel="stylesheet" type="text/css" />
		<link href="message/angular/style/css/IMChatstyle.css" rel="stylesheet" type="text/css" />
		
		
		<script type="text/javascript">
			

			if(!YYIMUtil['cookie']['get']('authToken')){
				console.log('authToken 获取失败！！');
				location.href="/site/user-entrance.html";
			}else{
				/**
				 * 消息处理 
				 * rongqb 20160310
				 */
				jQuery.get('./message/message.html').done(function(data) {
					jQuery('#im-content').html(data);
					window.imContent = jQuery('#im-message-app');
					angular.element("#im-message-app").ready(function() {
						angular.bootstrap(document.getElementById("im-message-app"), ["app"]);
						window.scope= angular.element(document.getElementById("im-message-app")).scope();
					});
				});
			
				jQuery.ajax({
					url: YYIMCacheConfig.SERVICE_ADDRESS + "service/login/userinfo",
					type:"post",
					dataType: "json",
					headers:{
						'Authorization':YYIMUtil['cookie']['get']('authToken')
					},
					cache:false,
					success:function(data){
						if(data.success){
							YYIMUtil['cookie']['set']('userinfo',JSON.stringify(data));
							YYIMChat.login(data.data.username + '.' + data.data.appId + '.' + data.data.etpId,data.data.userToken.token);
							
							var name = data.data.name;
							$('.user-action .avatar').html(cutString(name,1,2)).addClass('rainbow-'+getFirstLetter(name))
							$('.cur-uname').html(name);
						}
					},
					error:function(){
						valid.show('auth认证失败！！！',0,1000);
					}
				});
			}
		</script>
</body>
<!--  /Body -->
</html>
